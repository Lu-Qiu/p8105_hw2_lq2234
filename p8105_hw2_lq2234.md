Homework 2
================
Lu Qiu
2023-09-27

``` r
library(tidyverse)
```

### Problem 1

First, clean the data in pols-month.csv.

``` r
pols_month = 
  read_csv("./data/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c('year', 'month', 'day'), sep = '-') |>
  mutate(
    year = as.numeric(year)
  ) |>
  mutate(
    month = case_match(
      month,
      '01' ~ 'January',
      '02' ~ 'February',
      '03' ~ 'March',
      '04' ~ 'April',
      '05' ~ 'May',
      '06' ~ 'June',
      '07' ~ 'July',
      '08' ~ 'August',
      '09' ~ 'September',
      '10' ~ 'October',
      '11' ~ 'November',
      '12' ~ 'December'
    )) |>
  mutate(
    president = case_match(
      prez_dem,
      1  ~ 'dem',
      0 ~ 'gop'
    )) |>
  select(-c(prez_dem, prez_gop, day))
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Second, clean the data in snp.csv using a similar process to the above.
For consistency across datasets, arrange according to year and month,
and organize so that year and month are the leading columns.

``` r
snp_df = 
  read_csv("./data/snp.csv") |>
  janitor::clean_names() |>
  mutate(
    date = as.Date(date, format = '%m/%d/%y')
  ) |>
  mutate(
    date = as.Date(ifelse(date > Sys.Date(),
                           format(date, '19%y-%m-%d'),
                           format(date)))
  ) |>
  separate(date, into = c('year', 'month', 'day'), sep = '-') |>
  mutate(
    year = as.numeric(year)
  ) |>
  mutate(
    month = case_match(
      month,
      '01' ~ 'January',
      '02' ~ 'February',
      '03' ~ 'March',
      '04' ~ 'April',
      '05' ~ 'May',
      '06' ~ 'June',
      '07' ~ 'July',
      '08' ~ 'August',
      '09' ~ 'September',
      '10' ~ 'October',
      '11' ~ 'November',
      '12' ~ 'December'
    )) |>
  select(-day) |>
  arrange(year, month) |>
  relocate(year, month)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Third, tidy the unemployment data so that it can be merged with the
previous datasets. This process will involve switching from “wide” to
“long” format; ensuring that key variables have the same name; and
ensuring that key variables take the same values.

``` r
unemployment_df = 
  read_csv("./data/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = 'month',
    values_to = 'unemployment_percentage'
  ) |>
  mutate(
    month = case_match(
      month,
      'jan' ~ 'January',
      'feb' ~ 'February',
      'mar' ~ 'March',
      'apr' ~ 'April',
      'may' ~ 'May',
      'jun' ~ 'June',
      'jul' ~ 'July',
      'aug' ~ 'August',
      'sep' ~ 'September',
      'oct' ~ 'October',
      'nov' ~ 'November',
      'dec' ~ 'December'
    )) 
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Join the datasets by merging snp into pols, and merging unemployment
into the result.

``` r
middle_df = 
  left_join(pols_month, snp_df, by = c('year','month'))
final_df = 
  left_join(middle_df, unemployment_df, by = c('year','month'))
```

Write a short paragraph about these datasets. Explain briefly what each
dataset contained, and describe the resulting dataset (e.g. give the
dimension, range of years, and names of key variables).

- The `pols_month` dataset has 822 rows and 9 columns. The range of
  years is (1947, 2015). The names of key variables are: year, month,
  gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem, president.
- The `snp_df` dataset has 787 rows and 3 columns. The range of years is
  (1950, 2015). The names of key variables are: year, month, close.
- The `unemployment_df` dataset has 816 rows and 3 columns. The range of
  years is (1948, 2015). The names of key variables are: year, month,
  unemployment_percentage.
- The resulting dataset `final_df` has 822 rows and 11 columns. The
  range of years is (1947, 2015). The names of key variables are: year,
  month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem,
  president, close, unemployment_percentage.

### Problem 2

### Problem 3
